<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Job Cloud - Sign Up</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #6a11cb, #2575fc);
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .signup-container {
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      text-align: center;
      overflow-y: auto;
      max-height: 90vh;
    }
    .signup-container h2 {
      margin-bottom: 20px;
      color: #333;
    }
    .signup-container input, 
    .signup-container select, 
    .signup-container textarea {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 14px;
      box-sizing: border-box;
    }
    .signup-container button {
      width: 100%;
      padding: 12px;
      background: #2575fc;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
      transition: 0.3s ease;
    }
    .signup-container button:hover {
      background: #1a5ed1;
    }
    .signup-container a {
      display: block;
      margin-top: 12px;
      text-decoration: none;
      color: #2575fc;
      font-size: 14px;
    }
    .signup-container a:hover {
      text-decoration: underline;
    }
    .message {
      margin-top: 15px;
      font-weight: bold;
      color: green;
    }
    .error {
      color: red;
    }
    .loader {
      display: none;
      margin: 10px auto;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #2575fc;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="signup-container">
    <h2>Create Your Account</h2>
    <form id="signupForm" enctype="multipart/form-data">
      
      <input type="text" name="fullname" id="fullname" placeholder="Full Name" required>
      <input type="tel" name="mobile" id="mobile" placeholder="Mobile Number" pattern="[0-9]{10}" required>
      <input type="date" name="dob" id="dob" required>

      <select name="gender" id="gender" required>
        <option value="" disabled selected>Select Gender</option>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
        <option value="Other">Other</option>
      </select>

      <textarea name="address" id="address" placeholder="Full Address" rows="2" required></textarea>
      <input type="text" name="city" id="city" placeholder="City" required>
      <input type="text" name="state" id="state" placeholder="State" required>

      <input type="text" name="education" id="education" placeholder="Education / Qualification (e.g., B.E. in IT)" required>
      <input type="number" name="experience" id="experience" placeholder="Experience (in years)" min="0" required>

      <input type="text" name="skills" id="skills" placeholder="Skills / Expertise (e.g., HTML, Python, Photoshop)" required>
      <input type="file" name="resume" id="resume" accept=".pdf,.doc,.docx" required>

      <input type="email" name="email" id="email" placeholder="Email Address" required>
      <input type="password" name="password" id="password" placeholder="Password (min 6 chars)" minlength="6" required>

      <div class="loader" id="loader"></div>

      <button type="submit">Sign Up</button>
    </form>

    <p class="message" id="message"></p>

    <a href="login.html">Already have an account? Login</a>
  </div>

  <script>
    const form = document.getElementById("signupForm");
    const loader = document.getElementById("loader");
    const messageBox = document.getElementById("message");

    form.addEventListener("submit", async function(e) {
      e.preventDefault();

      const formData = new FormData(this);
      loader.style.display = "block";
      messageBox.textContent = "";

      try {
        const res = await fetch("https://jobcloud-backend.onrender.com/signup", {
          method: "POST",
          body: formData
        });

        loader.style.display = "none";
        const data = await res.text();

        if (res.ok) {
  // Save user info locally
  const fullname = document.getElementById("fullname").value;
  const email = document.getElementById("email").value;
  localStorage.setItem("userName", fullname);
  localStorage.setItem("userEmail", email);

  messageBox.textContent = "✅ Signup successful! Redirecting...";
  setTimeout(() => {
  const indexPath = location.href.replace("signup.html", "index.html");
  window.location.href = indexPath;
}, 1500);

        } else {
          messageBox.textContent = data;
          messageBox.classList.add("error");
        }
      } catch (error) {
        loader.style.display = "none";
        messageBox.textContent = "❌ Failed to connect to server";
        messageBox.classList.add("error");
      }
    });
  </script>
</body>
</html>

